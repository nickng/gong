-- This one is deadlocked, obv (17s)
def main.main():
    let t0 = newchan ty, 0;
    let t1 = newchan ty, 0;
    let t2 = newchan ty, 0;
    spawn philo(t0,t1);
    spawn philo(t1,t2);
    spawn philo(t2,t0);		
    spawn aFork(t0);
    spawn aFork(t1);
    spawn aFork(t2);

def aFork(fork):
    send fork;
    recv fork;
    call aFork(fork);
 

def philo(left,right) :
    recv left;
    recv right;
    -- EAT
    send left;
    send right;	
    call philo(left,right);